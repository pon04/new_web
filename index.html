<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>□ × □ = ○ + スコアボード</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: sans-serif;
      background-color: #fafafa;
    }
    .main {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    .math-container, .scoreboard-container {
      background-color: white;
      padding: 24px;
      border: 2px solid #ddd;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      margin-bottom: 24px;
      max-width: 800px;
      width: 100%;
    }
    .math-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      gap: 12px;
    }
    .math-container > span {
      font-size: 2rem;
      font-weight: bold;
    }
    select {
      font-size: 1.2rem;
      padding: 8px;
      border: 2px solid #ccc;
      border-radius: 8px;
      min-width: 140px;
      color: #555;
    }
    #result {
      display: inline-flex;
      justify-content: center;
      align-items: center;
      width: 60px;
      height: 60px;
      border: 3px solid #333;
      border-radius: 50%;
      background-color: #f0f0f0;
      font-size: 1.4rem;
      font-weight: bold;
      color: transparent;
    }
    .scoreboard-table {
      width: 100%;
      border-collapse: collapse;
    }
    .scoreboard-table th, .scoreboard-table td {
      border: 2px solid #333;
      padding: 8px;
      text-align: center;
    }
    input[type="number"] {
      width: 60px;
      font-size: 1rem;
      text-align: center;
    }
    .buttons {
      margin-top: 16px;
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
    }
    #history {
      margin-top: 16px;
    }
    @media (max-width: 480px) {
      .math-container {
        flex-direction: column;
        padding: 16px;
      }
      .math-container > span {
        font-size: 1.8rem;
      }
      select {
        width: 100%;
      }
      #result {
        width: 50px;
        height: 50px;
        font-size: 1.2rem;
      }
    }
  </style>
</head>
<body>
  <div class="main">
    <div class="math-container">
      <select id="select-left">
        <option value="" disabled selected>— 選択してください —</option>
      </select>
      <span>×</span>
      <select id="select-right">
        <option value="" disabled selected>— 選択してください —</option>
      </select>
      <span>=</span>
      <span id="result"></span>
      <button id="reset-btn">リセット</button>
    </div>

    <div class="scoreboard-container">
      <h3>スコアボード：A vs B（3回戦）</h3>
      <table class="scoreboard-table">
        <thead>
          <tr><th>チーム名</th><th>1回戦</th><th>2回戦</th><th>3回戦</th><th>合計</th></tr>
        </thead>
        <tbody>
          <tr>
            <td>A</td>
            <td><input type="number" id="a1" min="0"></td>
            <td><input type="number" id="a2" min="0"></td>
            <td><input type="number" id="a3" min="0"></td>
            <td id="a-total">0</td>
          </tr>
          <tr>
            <td>B</td>
            <td><input type="number" id="b1" min="0"></td>
            <td><input type="number" id="b2" min="0"></td>
            <td><input type="number" id="b3" min="0"></td>
            <td id="b-total">0</td>
          </tr>
        </tbody>
      </table>
      <div class="buttons">
        <button onclick="endGame()">試合終了</button>
        <button onclick="resetScoreboard()">スコアボードリセット</button>
        <button onclick="resetHistory()">履歴リセット</button>
      </div>
      <div id="history">
        <h4>試合履歴</h4>
        <ul id="history-list"></ul>
      </div>
    </div>
  </div>
  
  <script>
    const words = [
      "年齢", "連絡頻度", "社交性", "趣味", "優先度", "ひとり時間", "恋愛経験",
      "金銭感覚", "食の好み", "服の好み", "生活習慣", "居住地", "学歴"
    ];

    const values = {};

    window.addEventListener("DOMContentLoaded", () => {
      const selectLeft = document.getElementById("select-left");
      const selectRight = document.getElementById("select-right");

      words.forEach(word => {
        const opt1 = document.createElement("option");
        opt1.value = word;
        opt1.textContent = word;
        selectLeft.appendChild(opt1);

        const opt2 = document.createElement("option");
        opt2.value = word;
        opt2.textContent = word;
        selectRight.appendChild(opt2);
      });

      updateResult();
      selectLeft.addEventListener("change", updateResult);
      selectRight.addEventListener("change", updateResult);

      document.getElementById("reset-btn").addEventListener("click", () => {
        selectLeft.value = "";
        selectRight.value = "";
        updateResult();
      });
    });

    function updateResult() {
      const a = document.getElementById("select-left").value;
      const b = document.getElementById("select-right").value;
      const display = document.getElementById("result");
      if (!a || !b) {
        display.textContent = "";
        display.style.color = "transparent";
        return;
      }
      if (a in values && b in values[a]) {
        display.textContent = values[a][b];
        display.style.color = "#000";
      } else {
        display.textContent = "－";
        display.style.color = "#000";
      }
    }

    const inputIds = ["a1", "a2", "a3", "b1", "b2", "b3"];
    const aTotalEl = document.getElementById("a-total");
    const bTotalEl = document.getElementById("b-total");
    const historyList = document.getElementById("history-list");

    inputIds.forEach(id => {
      document.getElementById(id).addEventListener("input", updateTotals);
    });

    function updateTotals() {
      const aScores = [getVal("a1"), getVal("a2"), getVal("a3")];
      const bScores = [getVal("b1"), getVal("b2"), getVal("b3")];
      aTotalEl.textContent = aScores.reduce((a, b) => a + b, 0);
      bTotalEl.textContent = bScores.reduce((a, b) => a + b, 0);
    }

    function getVal(id) {
      const val = parseInt(document.getElementById(id).value);
      return isNaN(val) ? 0 : val;
    }

    function endGame() {
      const aSum = parseInt(aTotalEl.textContent);
      const bSum = parseInt(bTotalEl.textContent);
      const li = document.createElement("li");
      li.textContent = `試合 ${historyList.children.length + 1}：A ${aSum} - B ${bSum}`;
      historyList.appendChild(li);
    }

    function resetScoreboard() {
      inputIds.forEach(id => document.getElementById(id).value = "");
      aTotalEl.textContent = "0";
      bTotalEl.textContent = "0";
    }

    function resetHistory() {
      historyList.innerHTML = "";
    }
  </script>
</body>
</html>
